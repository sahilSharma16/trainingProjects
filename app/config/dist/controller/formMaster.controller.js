sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/core/Fragment","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/FilterType","sap/m/MessageBox"],function(e,o,t,r,a,i,n){"use strict";var s;return e.extend("app.config.controller.formMaster",{onInit:function(){},onCreateForm:function(){var e=this.getView();const t={formName:"",formDesc:""};const r=new o(t);e.setModel(r,"addFormModel");if(!this._oDialogForm){this._oDialogForm=sap.ui.xmlfragment("app.config.fragments.addForm",this);e.addDependent(this._oDialogForm)}this._oDialogForm.open()},oncancelNewForm:function(){this._oDialogForm.close()},onsaveNewForm:async function(){var e=this.getView().getModel("addFormModel").getData();await this.onLastFormID();var o={id:parseInt(s,10),formName:e.formName,formDesc:e.formDesc};console.log("data",o);let t=this.getView().getModel();let r=t.bindList("/formMaster");r.create(o);this._oDialogForm.close();this.RefreshData()},RefreshData:function(){this.getView().byId("formTable").getBinding("items").refresh()},onLastFormID:function(){try{var e=this.getView().byId("formTable");var o=e.getItems();var t=new Set;o.forEach(function(e){var o=parseInt(e.getCells()[0].getText(),10);if(!isNaN(o)){t.add(o)}});for(let e=1;e<=o.length+1;e++){if(!t.has(e)){s=e;break}}}catch(e){s="1"}console.log("Next Available ID:",s)},onselectForm:function(e){const o=this.getOwnerComponent().getRouter();var t=e.getSource().getBindingContext().getObject();o.navTo("RouteformField",{id:t.id,formName:t.formName,formDesc:t.formDesc})}})});